# DAVID

Author: balobin.p@mail.ru
Version 0.7.0.dev
Date 20.03.20

************************************************************************************************************************
Checkout list:
************************************************************************************************************************

1. Записать изменения в README.md в секцию "Изменения версий и процедуры"
2. Занести изменения в документацию "README.docx"
3. Сохранить изменения в Git

************************************************************************************************************************
To Do list:
************************************************************************************************************************

Уровень идей:
1. Сделать словарь английского языка для детей на основе nltk.corpus.wordnet.
2. Добавить модуль диагностики состояния датчиков и базы данных. Модуль должен запускаться по голосовому сигналу и предоставлять голосовой отчет.
3. Модуль. Таймер. Создавать голосом задачу на установку таймера.
4. Модуль. Список покупок.
5. Модуль. Каша.
10. Сделать приветствие при получении сигнала с датчика открывания двери.
13. Добавить интеграцию с сайтом погоды и добавить воозможность запрашивать погоду голосом.
14. Установить датчик движения в коридор для определения когда кто-то пришел с улицы для приветствия.
18. Установить Splunk для контроля состояния по данным файлов логов.
23. Добавить возможность выполнения API запросов из внешней сети (либо запросов по WA).
25. Сделать базу данных по категориям для детей на сайте, чтобы дети могли собирать материал по исследовательским темам.
26. Добавить датчик температуры и движения к датчику газа. Когда плита работает, датчик температуры показывает высокую температуру. Если нет движения на кухне в течение 10 минут, система сигнализирует, что забыли выключить плиту.
27. Добавить камеру на базе ESP32-CAM к сестеме датчиков входной двери.
28. Сделать модуль "Здоровье", который будет каждый день осведомляться о здоровье и записывать в базу. Таким образом, будет собрана база самочуствия.
29. Перевести все пароли в david_pass.json

Главный Компьютер:
1. Добавить обработку get запроса от контроллера NodeMcu02Gas о стоящей на газу посуде.
27. Добавить API на базе flask и flask_sqlalchemy для получения данных из базы данных.
30. Настроить звук и колонки

Модуль Django:
1. Упростить пароли
2. Сделать service для запуска django или перевести на Apache.
4. Решить проблему с первым входом на страницу Math, когда у пользователя нет ни одной решенной задачи в task02.

Модуль david_web_server:
1. Переделать, чтобы web server слушал не 80 порт а другой, в противном случае не запустить apach.

Модуль climate_check:
1. 

Модуль david_gas_check:
1. Добавит датчик температуры.

Модуль david_currency_check:
1. 

Модуль david_unittest:
1. 

Модуль david_healthcheck:
2. Доделать информирование пользователя.
3. Исправить дату с учетом часового пояса. Сейчас в почту приходят писма "Motion detected" с временем -3 от текущего.

Модуль david_user_interface:
1. 

Микроконтроллер NodeMcu01BedRoom:
1. Добавить sensor ID на экран при первичном подключении.
2. Добавить Deep sleep для модулей ESP с целью экономии энергии и устранения излучения (???).
3. Добавить сохранение данных в файл в случае недоступности сервера с выгрузкой на сервер после появления сервера.

Микроконтроллер NodeMcu02Gas:
1. Заменить DELAY_HTTP_REPORT на переменную типа unsigned long.
unsigned long delay_http_report = 900000;
if (millis() - last_time > delay_http_report) {...
2. Добавить датчик температуры.
3. Добавить датчик освещенности.
4. Добавить отображения кол-ва секунд до выключения освещения.
5. Сделать пересчет уровня газа в проценты по формуле.

Микроконтроллер NodeMcu03Door (датчик между входными дверями)
1. Увеличить таймер выключения света до 30 секунд.
3. В http запрос connect добавить версию прошивки.

Микроконтроллер NodeMcu04Entrance (датчик в коридоре)
1. Заменить датчик движения.
2. Разработать.
3. В http запрос connect добавить версию прошивки.

Микроконтроллер NodeMcu01cChildrenRoom:
1. Спаять провода для подключения питания к ESP01 и к DHT11 согласно схеме.
2. Перепаять выход на блоке питания на 5.1.
3. Переписать модуль на Python с экраном и корпусом.

************************************************************************************************************************
Изменения версий и процедуры
************************************************************************************************************************

------------------------------------
Version 0.7.0.dev change list and installation procedure:
------------------------------------

Главный Компьютер:
1. Добавлены VIEW для неправильных глаговов в базу данных.
2. Добавлена информация о прогрессе выполнения задания для неправильных глаголов.
3. Добавлено измерение температуры процессора Raspberry Pi в david_healthcheck.py
4. Добавлены бэкапы базы данных на ftp сервер.
5. Все модули из Cron переведены на systemd

Микроконтроллер NodeMcu01BedRoom:
1. Перевод на MicroPython

Микроконтроллер NodeMcu02Gas:
1. Перевод на MicroPython

Version installation procedure:
1. Указать юзернейм и пароль ftp сервера в david_pass.json
2. Указать ftp ip адрес в david_lib.py
3. Сделать прошивку модуля NodeMcu01BedRoom