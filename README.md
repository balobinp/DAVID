# DAVID

Author: balobin.p@mail.ru
Version 0.0.1.dev
Date 20.03.19

*************************************************************************
To Do list:
*************************************************************************

Главный Компьютер:
1. Сделать словарь английского языка для детей на основе nltk.corpus.wordnet.
2. Добавить модуль диагностики состояния датчиков и базы данных. Модуль должен запускаться по голосовому сигналу и предоставлять голосовой отчет.
3. Модуль. Таймер. Создавать голосом задачу на установку таймера.
4. Модуль. Список покупок.
5. Модуль. Каша.
6. Добавить unit тестирование.
7. В базу данных добавить таблицу датчиков.

Модуль climate:
2. Сделать абсолютные пути к файлам, чтобы можно было запускать из любого места файловой системы.
3. В случае отсутствия файлов базы данных или логов добавлять их.

Модуль climate_check:
1. Добавить логирование событий в файл для модуля climate_check
2. Сделать абсолютные пути к файлам, чтобы можно было запускать из любого места файловой системы.
3. Отслеживать динамику изменения температуры и при резком похолодании сообщать: "В спальне становиться прохладно".

Микроконтроллер NodeMcu01BedRoom:
1. Реализовать подключение к WiFi модулей ESP в цикле только для передачи информации, чтобы устранить лишнее излучение (???).
2. Добавить Deep sleep для модулей ESP с делью экономии энергии и устранения излучения (???).
3. Заменить датчик DHT11 на DHT22.
4. Вынести номер сенсора и IP главного компютрера в переменные.

Микроконтроллер NodeMcu02Gas:
1. Сделать.

Микроконтроллер NodeMcu03Door
1. Сделать.

*************************************************************************
Изменения версий и процедуры
*************************************************************************

Version 0.0.1.dev change list:
Модуль climate:
1. Добавлено логирование событий в файл для модуля climate. В том числе логирование событий подключения Микроконтроллера NodeMcu01BedRoom.

Микроконтроллер NodeMcu01BedRoom:
1. Изменен формат http get запроса при подключении.

Version 0.0.1.dev change procedure:
0. Остановить скрины.
1. Создать пользователя david и директорию /home/user/david/
2. Создать директорию /home/user/david/log
3. Перенести базу данных в /home/user/david/david_db.sqlite
4. Обновить файл climate.py и поместить его в /home/user/david
5. Обновить прошивку NodeMcu01BedRoom.
6. Запустить скрины.

Default version change procedure:

Instalation procedure:
ps -aux | grep climate
sudo screen -S climate_check
sudo python3.6 ./david/climate_check.py

*************************************************************************
Описание проекта (скрипты и контроллеры)
*************************************************************************

------------------------------------
Main server
------------------------------------
Модуль climate:
-----------------
Файл: climate.py
Задача:
Web сервер.
Принимает http запросы от микроконтроллеров с климатическими сенсорами.
Сохраняет полученные данные в базу данных.

Модуль climate_check
-----------------
Файл: climate_check.py
Задача:
Запрашивает климатические данные из базы данных и оповещает голосом в случае превышения нормативов.

Модуль "Список покупок" (проект)
-----------------
Модуль анализа речи подает сигнал на GPIO порт главного компьютера.
При получении сигнала с GPIO порта активируется программа, которая дает отклик, например: "Слушаю".
Далее по команде "Запиши в список покупок" переключается в подпрограмму записи покупок и выдает ответ: "Записываю".
Далее дается наименование товара.
Модуль произносит услашанное и ждет подтверждения.
Если подтверждение получено, наименование записывается в базу с датой создания и идентификатором списка покупок.
Должна быть реализована возможность закрывать список покупок и получать список покупок в виде речи и в виде сообщения в WhatsApp.

Вспомогательные модули Главного Компьютера
------------------------------------
Модуль climate_db_create
-----------------
Файл: climate_db_create.py
Задача:
Создает или пересоздает базу данных sqlite.

Модуль voice_recorder
-----------------
Файл: voice_recorder.py
Задача:
Запись голосовых сэмплов для проигрывания на Главном Компьютере.

Модуль climate_test_get
-----------------
Файл: climate_test_get.py
Задача:
Отправка GET запросов для тестирования модуля climate.

Модуль Template
-----------------
Файл: 
Задача:

------------------------------------
Микроконтроллер NodeMcu01BedRoom
------------------------------------
Файл: 

Задача:
Считывает данные с датчика DHT11 и отправляет на Главный Компютер посредством http get запросов.

Элементная база:
1. NodeMcu
2. DHT11 датчик температуры и влажности.
3. В http get запросе подключения указать номер сенсора и поменять IpAddr на ip http://192.168.1.63:80/connected;sensor=1&ip=

------------------------------------
Микроконтроллер NodeMcu02Gas
------------------------------------
Файл: 

Задача:
Считывает данные с датчика газа и отправляет на Главный Компьютер посредством http get запросов.

Элементная база: 

------------------------------------
Микроконтроллер NodeMcu03Door
------------------------------------
Файл: 

Задача:
Считывает данные с датчика движения.
Отправляет события на Главный Компьютер посредством http get запросов.
Включает освещение по событиям с датчика движения.

Элементная база: 

------------------------------------
Микроконтроллер Template
------------------------------------
Файл: 

Задача:

Элементная база: 
